<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>大猫猫的奇幻航海</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="game-container">
        <div id="main-menu" class="screen active">
            <h1 class="game-title">🐈大猫猫的<br>奇幻航海</h1>
            <div class="pixel-btn btn-main" style="background:var(--btn-red)" onclick="showFactions()">新的游戏</div>
            <div class="pixel-btn btn-main" style="background:var(--btn-blue)" onclick="loadGame()">读取存档</div>
            <div class="spacer"></div>
            <div class="pixel-btn btn-log" onclick="catAlert('v0.3: 修正了航行逻辑，现在不会在两港之间反复横跳了；修正了侍女好感度检定。')">更新日志 v0.3</div>
        </div>

        <div id="faction-screen" class="screen">
            <h3 class="screen-title">选择你的出生阵营</h3>
            <div class="faction-grid" id="faction-list"></div>
            <div class="pixel-btn" onclick="showScreen('main-menu')">返回主界面</div>
        </div>

        <div id="port-screen" class="screen">
            <div class="port-header">
                <div class="side-menu left">
                    <div class="pixel-btn tiny-btn" onclick="openModule('office')">行政厅</div>
                    <div class="pixel-btn tiny-btn" onclick="openModule('market')">市场</div>
                    <div class="pixel-btn tiny-btn" onclick="openModule('tavern')">酒馆</div>
                    <div class="pixel-btn tiny-btn" onclick="openModule('inn')">旅馆</div>
                    <div id="btn-shipyard" class="pixel-btn tiny-btn" onclick="openModule('shipyard')">造船厂</div>
                    <div class="pixel-btn tiny-btn" onclick="openModule('guild')">同业公会</div>
                </div>
                
                <div class="port-center">
                    <div id="display-port-name">里斯本</div>
                    <div id="display-money" style="font-size:16px; color:#2d3436; margin-top:10px;">￥1000</div>
                </div>

                <div class="side-menu right">
                    <div class="pixel-btn tiny-btn btn-supply" style="background:var(--btn-yellow)" onclick="handleSupply()">补给</div>
                    <div id="btn-repair" class="pixel-btn tiny-btn btn-repair" style="background:#ff9f43" onclick="handleRepair()">修船</div>
                    <div class="pixel-btn tiny-btn btn-depart" style="background:var(--btn-red); color:white" onclick="handleDepart()">出港</div>
                </div>
            </div>

            <div id="sub-window" class="modal-hidden">
                <h4 id="sub-window-title">市场</h4>
                <div id="sub-window-content"></div>
                <div class="pixel-btn" style="margin-top:auto" onclick="closeModule()">离开</div>
            </div>

            <div id="log-area"></div>

            <div class="bottom-nav">
                <div class="pixel-btn nav-btn" onclick="openModule('role')">角色</div>
                <div class="pixel-btn nav-btn" onclick="openModule('team')">编组</div>
                <div class="pixel-btn nav-btn" onclick="openModule('items')">物品</div>
                <div class="pixel-btn nav-btn" onclick="openModule('task')">任务</div>
                <div class="pixel-btn nav-btn btn-save" style="background:#ff9f43" onclick="saveGame()">存档</div>
            </div>
        </div>

        <div id="game-modal" class="modal-overlay" style="display:none;">
            <div class="modal-box">
                <div class="modal-header">🐈 船长请注意</div>
                <div id="modal-body" class="modal-body"></div>
                <div class="modal-footer">
                    <div class="pixel-btn" id="modal-ok-btn">确定</div>
                    <div class="pixel-btn" id="modal-cancel-btn" style="background:var(--btn-red); color:white; display:none;">取消</div>
                </div>
            </div>
        </div>
    </div>
    <script src="game.js"></script>
</body>
</html>